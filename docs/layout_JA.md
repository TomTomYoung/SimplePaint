# アプリケーションレイアウト仕様

現在のSimplePaintアプリケーションの画面レイアウト構造について記述します。

## 全体構造

アプリケーションはCSS Gridを使用した3行構成（ヘッダー、メイン、フッター）となっています。

```css
#app {
  display: grid;
  grid-template-rows: auto 1fr auto;
  height: 100dvh;
}
```

### 1. ヘッダー (`header`)
- **役割**: ファイル操作、調整、ビュー操作、選択処理などのシステムコマンド、およびツールバーを配置。
- **構造**:
  - `#systems`: 以下のグループを左から右へ並べたツールバー。
    - **ファイル**: 前回復元、新規、開く、保存（PNG/JPEG/WebP）。
    - **編集**: Undo/Redo、クリップボード、選択対象（キャンバス/レイヤー）切り替え、選択トリミング・ミラー、調整パネル呼び出し。
    - **キャンバス**: 全レイヤークリア、キャンバスサイズ変更、不可逆変換（水平/垂直鏡像）。
    - **レイヤー**: レイヤー追加、ベクター追加、レイヤー削除。
    - **表示**: 画面に合わせる、100%、ツール検索。
  - `#tools`: ツール選択ボタン群。カテゴリごとに `details.tool-dropdown` でグループ化されています。基本ツールには矩形選択と自由選択を配置。

### 2. メインステージ (`#stage`)
- **役割**: キャンバスとサイドパネルを表示する主要領域。
- **構造**: Flexbox (`display: flex`) で左右のパネルと中央のキャンバスエリアを配置。

#### 左パネル (`#leftPanel`)
- **役割**: ツールプロパティ、パレット、ショートカット情報の表示。
- **構成**:
  - **アコーディオン (`.tool-accordion`)**: 以下のセクションを開閉可能。
    1. **プロパティ (`data-section="properties"`)**:
       - **プロパティ設定 (`#toolPropContainer`)**: ブラシサイズや不透明度などの設定項目。
    2. **カラーパレット (`data-section="palette"`)**: 色選択とJSONによるパレット管理。
    3. **ショートカット (`data-section="shortcuts"`)**: 現在のツールの操作説明。

#### キャンバスエリア (`#canvasArea`)
- **役割**: 描画キャンバスの表示。
- **構成**:
  - `#base`: ラスターレイヤー描画用。
  - `#overlay`: 一時的な描画（カーソル、ドラッグ中の形状など）用。
  - `#editorLayer`: テキスト入力などのDOM要素用レイヤー。
- **スクロール**: `#canvasArea` 自体が `overflow: scroll` を持ち、キャンバスが画面より大きい場合のスクロールを担当します。

#### 右パネル (`#layerPanel`)
- **役割**: レイヤー管理。
- **構成**:
  - レイヤーフィルター、検索、追加・削除ボタン。
  - レイヤーリスト (`#layerList`)。
  - レイヤープロパティ（ベクター設定など）。

### 3. フッター (`footer`)
- **役割**: ステータス表示、ズーム倍率、レイアウト切り替え、ショートカットヒント。

## パネルリサイズ
- `#leftResizer`, `#rightResizer`: パネルとキャンバスの境界に配置され、ドラッグによる幅変更が可能。

## 調整パネル (`#adjustPanel`)
- **役割**: 色調補正などの調整機能。
- **配置**: `position: fixed` でフローティング表示。ヘッダーの高さに応じて位置を調整。

